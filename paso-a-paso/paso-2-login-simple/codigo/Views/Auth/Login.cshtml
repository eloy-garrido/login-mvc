@model LoginSimple.Models.LoginViewModel

@{
    ViewData["Title"] = "Iniciar Sesi√≥n";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            
            <!-- Header con t√≠tulo principal -->
            <div class="text-center mb-4">
                <h1 class="display-4">üîê Paso 2</h1>
                <h2 class="h3 text-muted">Login con Username + Password</h2>
            </div>

            <!-- Tarjeta principal del formulario -->
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="text-center mb-0">Iniciar Sesi√≥n</h3>
                </div>
                <div class="card-body">
                    
                    <!-- Explicaci√≥n de lo que hace este paso -->
                    <div class="alert alert-info" role="alert">
                        <strong>üÜï ¬°Nuevo en el Paso 2!</strong><br>
                        Ahora validamos <strong>username + password</strong> para hacer login real.
                        Contrase√±a de prueba para todos los usuarios: <code>123456</code>
                    </div>

                    <!-- Mostrar mensaje de logout si existe -->
                    @if (TempData["LogoutMessage"] != null)
                    {
                        <div class="alert alert-success" role="alert">
                            @TempData["LogoutMessage"]
                        </div>
                    }

                    <!-- Mostrar mensaje de error si existe -->
                    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                    {
                        <div class="alert alert-danger" role="alert">
                            <strong>‚ùå Error:</strong> @Model.ErrorMessage
                        </div>
                    }

                    <!-- Formulario de login -->
                    <form asp-action="Login" method="post">
                        @* Token anti-falsificaci√≥n *@
                        @Html.AntiForgeryToken()
                        
                        <div class="mb-3">
                            <!-- Campo Username (IGUAL que Paso 1) -->
                            <label asp-for="Username" class="form-label">
                                <strong>@Html.DisplayNameFor(m => m.Username)</strong>
                            </label>
                            <input asp-for="Username" 
                                   class="form-control form-control-lg" 
                                   placeholder="Ingresa tu nombre de usuario"
                                   autocomplete="username" />
                            <span asp-validation-for="Username" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <!-- üÜï NUEVO: Campo Password -->
                            <label asp-for="Password" class="form-label">
                                <strong>@Html.DisplayNameFor(m => m.Password)</strong>
                            </label>
                            <input asp-for="Password" 
                                   class="form-control form-control-lg" 
                                   placeholder="Ingresa tu contrase√±a"
                                   autocomplete="current-password" />
                            <span asp-validation-for="Password" class="text-danger"></span>
                            
                            <!-- Ayuda para el usuario -->
                            <div class="form-text">
                                <small>üí° Contrase√±a de prueba: <code>123456</code> para todos los usuarios</small>
                            </div>
                        </div>

                        <!-- Bot√≥n de env√≠o -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                üîê Iniciar Sesi√≥n
                            </button>
                        </div>
                    </form>

                    <!-- Enlaces adicionales -->
                    <div class="text-center mt-4">
                        <hr>
                        <small class="text-muted">
                            Paso 2 de 4 - Sistema de Login Progresivo
                        </small>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n sobre credenciales de prueba -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">üß™ Credenciales de Prueba</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>‚úÖ Login Exitoso:</h6>
                            <ul class="list-unstyled">
                                <li><strong>Usuario:</strong> <code>admin</code> | <strong>Pass:</strong> <code>123456</code></li>
                                <li><strong>Usuario:</strong> <code>maria</code> | <strong>Pass:</strong> <code>123456</code></li>
                                <li><strong>Usuario:</strong> <code>carlos</code> | <strong>Pass:</strong> <code>123456</code></li>
                                <li><strong>Usuario:</strong> <code>ana</code> | <strong>Pass:</strong> <code>123456</code></li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>‚ùå Para Probar Errores:</h6>
                            <ul class="list-unstyled">
                                <li><strong>Usuario:</strong> <code>admin</code> | <strong>Pass:</strong> <code>wrong</code></li>
                                <li><strong>Usuario:</strong> <code>noexiste</code> | <strong>Pass:</strong> <code>123456</code></li>
                                <li>Dejar campos vac√≠os</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n t√©cnica -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">üí° ¬øQu√© cambi√≥ desde el Paso 1?</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>üîÑ Modificaciones:</h6>
                            <ul class="list-unstyled">
                                <li>‚úÖ <strong>Formulario:</strong> + Campo password</li>
                                <li>‚úÖ <strong>Modelo:</strong> + Propiedad Password</li>
                                <li>‚úÖ <strong>BD:</strong> + Columna password</li>
                                <li>‚úÖ <strong>Validaci√≥n:</strong> username + password</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>üéØ Nuevas Features:</h6>
                            <ul class="list-unstyled">
                                <li>‚úÖ <strong>Login real:</strong> Autenticaci√≥n completa</li>
                                <li>‚úÖ <strong>Dashboard:</strong> P√°gina de bienvenida</li>
                                <li>‚úÖ <strong>Logout:</strong> Cerrar sesi√≥n</li>
                                <li>‚úÖ <strong>UX mejorada:</strong> Flujo completo</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Scripts para validaci√≥n del lado del cliente -->
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
